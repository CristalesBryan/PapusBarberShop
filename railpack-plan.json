{
  "build": {
    "builder": "NIXPACKS",
    "buildCommand": "echo 'Building PapusBarberShop...' && cd Backend && chmod +x mvnw 2>/dev/null || true && (./mvnw clean package -DskipTests || mvn clean package -DskipTests) && mkdir -p src/main/resources/static/admin src/main/resources/static/clientes && rm -rf src/main/resources/static/admin/* src/main/resources/static/clientes/* && cd ../Frontend && echo 'Building Frontend (Admin)...' && (npm install --legacy-peer-deps || npm install) && (npm run build --if-present || npm run build:prod || npm run build) && DIST_DIR=$(find dist -maxdepth 1 -type d ! -path dist 2>/dev/null | head -n 1) && if [ -z \"$DIST_DIR\" ]; then DIST_DIR=\"dist\"; fi && cp -r \"$DIST_DIR\"/* ../Backend/src/main/resources/static/admin/ 2>/dev/null || find \"$DIST_DIR\" -type f -exec cp --parents {} ../Backend/src/main/resources/static/admin/ \\; && cd ../Vista-Clientes && echo 'Building Vista-Clientes...' && (npm install --legacy-peer-deps || npm install) && (npm run build --if-present || npm run build:prod || npm run build) && DIST_DIR=$(find dist -maxdepth 1 -type d ! -path dist 2>/dev/null | head -n 1) && if [ -z \"$DIST_DIR\" ]; then DIST_DIR=\"dist\"; fi && cp -r \"$DIST_DIR\"/* ../Backend/src/main/resources/static/clientes/ 2>/dev/null || find \"$DIST_DIR\" -type f -exec cp --parents {} ../Backend/src/main/resources/static/clientes/ \\; && echo 'Build completed successfully'",
    "startCommand": "cd Backend && JAR_FILE=$(find target -name '*.jar' -not -name '*-sources.jar' -not -name '*-javadoc.jar' -not -name '*-original.jar' 2>/dev/null | head -n 1) && if [ -z \"$JAR_FILE\" ]; then echo 'Error: JAR file not found' && exit 1; fi && if [ -n \"$PORT\" ]; then java -Dserver.port=$PORT -jar \"$JAR_FILE\"; else java -jar \"$JAR_FILE\"; fi"
  }
}
